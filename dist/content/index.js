console.log("‚úÖ TasteSwap content script loaded");window.addEventListener("load",()=>{var a,i,c,s,l,u,p;const r=window.location.hostname;let e,t,n;if(r.includes("amazon")?(e=(i=(a=document.getElementById("productTitle"))==null?void 0:a.innerText)==null?void 0:i.trim(),t=(c=document.getElementById("landingImage"))==null?void 0:c.src,n=document.getElementById("productTitle")):r.includes("flipkart")&&(e=(l=(s=document.querySelector("h1._6EBuvT"))==null?void 0:s.innerText)==null?void 0:l.trim(),t=(u=document.querySelector("img._53J4C-"))==null?void 0:u.src,n=document.querySelector("h1._6EBuvT")),!e||!t||!n||document.getElementById("tasteSwapBox"))return;const o=document.createElement("div");o.id="tasteSwapBox",o.innerHTML=`
    <div style="margin-top: 20px; padding: 10px; border: 2px dashed #22c55e; border-radius: 12px; background: #f0fdf4;">
      <h4 style="margin: 0 0 8px; font-size: 14px; font-weight: bold; color: #166534;">‚ôªÔ∏è Want to swap this instead of returning?</h4>
      <button id="tasteSwapBtn" style="padding: 6px 12px; background: #22c55e; color: white; border: none; border-radius: 8px; cursor: pointer;">Find a Match</button>
    </div>
  `,(p=n.parentElement)==null||p.appendChild(o),setTimeout(()=>{const m=document.getElementById("tasteSwapBtn");m&&m.addEventListener("click",()=>{const d={title:e,image:t};console.log("üñ±Ô∏è Button clicked with data:",d),chrome.storage.local.set({tasteSwapProduct:d},()=>{console.log("üì¶ Product stored in local storage",d),chrome.runtime.sendMessage({type:"open_popup"})})})},100)});
